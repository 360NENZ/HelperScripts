#!/usr/bin/python3
import sys
import json
from argparse import ArgumentParser

CODE_SWITCH_DATA = {
  "disable_volume_stream": 2,
  "enable_ui_water_mask": 5,
  "disable_report_not_exist_entity": 13,
  "disable_sdk_crash_report": 14,
  "disable_preload_anim_pattern": 15,
  "disable_forbid_ragdoll_in_mdangoen": 16,
  "disable_mono_effect_proxy_recycle": 20,
  "enable_sdk_server": 21,
  "disable_sectr_preload_under_big_cache": 22,
  "enable_product_list_log": 24,
  "disable_enviro_ratio_config_and_entity_tick_dist": 25,
  "disable_layer_proxy_force_unloaded_when_loader_is_empty": 26,
  "disable_check_inlevel_message": 28,
  "disable_check_inlevel_message_log": 29,
  "disable_refresh_team_ability_when_recover": 31,
  "disable_serverbuff_attach_modifier_fix": 32,
  "disable_ability_log_plugin_string_append": 33,
  "disable_mono_grid_scroller_force_init_v2": 34,
  "disable_pc_resolution_height_sort": 35,
  "disable_sectr_lazy_load": 36,
  "disable_auto_switch_to_unknown_controller_in_pc": 37,
  "disable_quest_loadcheck_after_changeworld": 39,
  "disable_sectr_forcereset_diff": 40,
  "disable_packet_stack_log": 41,
  "disable_quest_lockui": 42,
  "enable_monster_appear_use_sync_pose": 43,
  "disable_group_data_item_dict_clear": 2101,
  "disable_monster_appear_check": 2102,
  "disable_ai_skill_assert_log": 2103,
  "disable_homeworld_guid_check": 2104,
  "disable_ai_threat_thead_safe_code": 2105,
  "disable_guide_path_remove_duplicate": 2106,
  "disable_remote_monster_bullet_hit_avatar_scene_temp": 2107,
  "disable_create_npc_check_not_ready": 2108,
  "disable_icefloor_mixin_timescale": 2109,
  "disable_modifier_recover_closure_fix": 2110,
  "disable_electric_fly_modifier_replace_fix": 2111,
  "disable_modifier_replace_fix": 2112,
  "disable_lasignora_climate_attach_clear": 2113,
  "disable_reset_interpolate_pos": 2114,
  "disable_ios_video_change_mobile_vsync": 2116,
  "disable_lasignora_override_invincible": 2117,
  "enable_override_modifier_abilitystate_fix": 2118,
  "disable_new_attach_modifier_recover": 2201,
  "disable_remove_npc_after_transmit": 2202,
  "disable_ai_manager_send_packet_thread": 2203,
  "disable_reports_spiral_abyss": 2204,
  "disable_avatar_goupstair_targetpoint_height_check": 2205,
  "disable_volume_portal_active_toggle": 2206,
  "disable_loader_refresh_after_hlod_unload": 2207,
  "enable_monster_refresh_property_local": 2208,
  "disable_new_ai_param_sync": 2209,
  "enable_specific_modifier_replace_fix": 2210,
  "disable_check_scene_transaction": 2211,
  "disable_monster_readjust_pos_in_first_latetick": 2212,
  "disable_avatar_reset_fsm_clear_velocity_force": 2213,
  "disable_layer_loader_unregsiter_loading_on_release": 2214,
  "disable_team_ability_hash_validate": 2215,
  "disable_avatar_ability_hash_recalc": 2216,
  "disable_ability_onevent_protect": 2217,
  "enable_avatar_reuse_addability": 2218,
  "disable_delay_clear_on_web_view_close": 2219,
  "disable_part_control_remote_find_attack_target": 2220,
  "disable_set_keyboard_map_enable_only_on_usingkeyboard": 2221,
  "disable_ai_use_level_time": 2222,
  "disable_leveltime_log": 2223,
  "disable_handle_effect_spawn_in_tick": 2224,
  "disable_dropdown_do_hide_on_destroy": 2225,
  "disable_entity_appear_reconnect_clear": 2226,
  "disable_device_extra_framerate": 2227,
  "disable_width_resolution_match_mode_on_specific_device": 2301,
  "disable_avatar_crosswall_protection": 2302,
  "disable_interaction_streaming_by_action_avatar": 2303,
  "disable_flush_token_in_latetick": 2304,
  "disable_avatar_crosswall_protection_next_frame": 2305,
  "disable_ability_invoke_wait": 2306,
  "billboard_hp_uselightdeactive": 2308,
  "enable_proud_skill_excel_config_load_on_demand": 2309,
  "enable_componentinit_callback": 2310,
  "enable_componentinitpost_callback": 2311,
  "enable_entityreadybeforepost_callback": 2312,
  "disable_attach_modifier_sync": 2313,
  "disable_entity_appear_unlimited_log": 2315,
  "disable_sectr_cachedguid_optimize": 2316,
  "enable_old_ipv6": 2317,
  "disable_copy_camera_old_state_protect": 2318,
  "enable_clear_actor_mgr_on_questlistupdate_init": 2319,
  "disable_reconnect_token_check": 2320,
  "enable_entity_appear_reconnect_clear_specy": 2321,
  "enable_out_view_entity_notify": 2322,
  "disable_enviro_cloud_can_use_volume_param": 2323,
  "enable_loading_proto_order_preserving": 2324,
  "disable_ios_keyboard_nativeeditplugin_fix": 2325,
  "disable_lc_base_equip_controller_add_equip_bar_on_attach_event_fix": 2326,
  "disable_gamegoto_uri_unescape": 2327,
  "disable_bilibili_sdk_init_de_duplication": 2328,
  "disable_appear_serverlog": 2329,
  "disable_check_killself_on_avatar": 2332,
  "disable_entity_appear_use_async_list": 2333,
  "disable_immediate_skillstart": 2334,
  "disable_homeworld_float_clamp": 2335,
  "disable_find_avatar_by_peerid_fix": 2336,
  "enable_avatar_combatmove_to_crouch": 2337,
  "disable_clear_farmode_change_camera_state": 2338,
  "disable_check_top_state_enter_farmode": 2339,
  "disable_actor_trigger_initvar": 2341,
  "disable_check_sceneprop_trans": 2342,
  "disable_main_page_icon_refresh_when_switch_joystick": 2401,
  "disable_guide_prefab_white_list": 2402,
  "disable_guide_hint_white_list": 2403,
  "enable_grass_reaction": 2404,
  "disable_reuse_monster_equip_entity": 2405,
  "enable_old_listenevent": 2406,
  "disable_battle_fervor": 2407,
  "enable_sending_move_task_in_teleporting": 2408,
  "disable_scene_prop_destroy_slice_frame": 2409,
  "disable_sectr_render_root": 2410,
  "disable_crowd_texture_validation": 2411,
  "disable_blur_capture_optimize": 2412,
  "disable_textmap_async_load": 2413,
  "disable_hit_element_change_order": 2415,
  "disable_fire_subemitter_effect_in_tick": 2416,
  "disable_evt_attack_landed_handled_immediately": 2417,
  "disable_ui_combine_foreach": 2418,
  "disable_selected_points_for_combat_target_lock": 2419,
  "disable_sectr_obj_tag": 2420,
  "disable_sectr_hotspot": 2421,
  "disable_localgadget_authority_from_player": 2422,
  "disable_global_perf_graphic": 2423,
  "disable_ability_hash_debug_info": 2425,
  "disable_lazysetparentability_remove_modifier": 2426,
  "disable_lazysetparentability_remove_special_modifier": 2427,
  "disable_change_dead_avatar_clear_fix": 2428,
  "disable_same_heightmap_height": 2429,
  "disable_ignore_spacial_obstacle": 2430,
  "disable_climb_air_bug_fix": 2429,
  "disable_massive_position_fix": 2430,
  "disable_sectr_grass_use_uniform_loadheight": 2431,
  "disable_skiff_physics_constrain": 2432,
  "disable_pre_process_avatar_appear": 2433,
  "disable_pre_process_avatar_disappear": 2434,
  "disable_monster_clear_task_when_change_auth": 2436,
  "disable_add_tracking_monster_mark_at_markmanager_init": 2437,
  "disable_remove_mixin_event": 2438,
  "disable_check_entity_event": 2439,
  "disable_sectr_duplicate_unload": 2440,
  "disable_webview_disconnect_clear": 2441,
  "disable_map_move_cursor": 2443,
  "disable_dummy_depth_texture_global": 2444,
  "disable_sub_shader_index_check": 2445,
  "disable_die_abyss_use_server_drop_item_pos": 2446,
  "disable_allow_parallel_in_boss_camera_state": 2447,
  "disable_ai_threat_change_avatar_log": 2448,
  "disable_2x2_hlod_block": 2501,
  "enable_scale_ratio_check_before_update_camera_aspect": 2502,
  "disable_bullet_stick_to_ground_ignore_barrier": 2503,
  "disable_support_subemitter_in_effectmanager": 2504,
  "disable_rigidbody_iskinematic_recover": 2505,
  "disable_dummy_token_cache": 2507,
  "disable_check_cinestate_when_enter_focus": 2508,
  "enable_ps5_mic_blow_detection": 2509,
  "disable_sdk_webview_preload": 2510,
  "enable_npc_retarget": 2511,
  "disable_npc_remove_delay_talk_remove": 2512,
  "disable_extra_button_single_handler": 2513,
  "disable_skip_pcss_non_level": 2515,
  "disable_resolve_ui_camera_full_res": 2516,
  "disable_tactic_facing_move_in_collect_trhead": 2551,
  "disable_tactic_spacial_facing_move_in_collect_trhead": 2552,
  "disable_tactic_surround_in_collect_trhead": 2553,
  "disable_tactic_group_surround_in_collect_trhead": 2554,
  "disable_tactic_spacial_chase_in_collect_trhead": 2555,
  "disable_tactic_spacial_probe_in_collect_trhead": 2556,
  "disable_tactic_spacial_wander_in_collect_trhead": 2557,
  "disable_tactic_spacial_adjust_in_collect_trhead": 2558,
  "disable_tactic_landing_in_collect_trhead": 2559,
  "disable_tactic_extraction_in_collect_trhead": 2560,
  "disable_tactic_flee_in_collect_trhead": 2561,
  "disable_tactic_flee_on_block_avatar_landing_in_collect_trhead": 2562,
  "disable_tactic_bird_circling_in_collect_trhead": 2563,
  "disable_tactic_fishing_flee_in_collect_trhead": 2564,
  "disable_check_npc_sit_when_update_dither": 2570,
  "disable_ability_bug_log": 2571,
  "disable_view_set_light_active": 2572,
  "enable_loader_stream_info_lazy_delete": 2573,
  "disable_hlod_model_layer_fast_reset_override": 2574,
  "disable_sumocombat_load_avatar_later": 2575,
  "disable_check_avatar_sit_when_update_dither": 2576,
  "disable_map_load_with_job": 2577,
  "disable_ui_resource_oversea_replace": 2578,
  "disable_color_grading_config": 2585,
  "enable_shadow_distance_set_change_esp": 2586,
  "disable_team_effect_load_with_job": 2587,
  "disable_electric_core_move_mixin_on_removed_fix": 2588,
  "disable_weapon_entity_ready_callback": 2589,
  "disable_change_frozen_dead_avatar_fix": 2590,
  "disable_bartender_kinematic": 2591,
  "enable_check_monster_owner_die_id": 2592,
  "disable_joypad_gridscroller_protection": 2601,
  "disable_ai_combat_skill_execute_change": 2602,
  "disable_sector_height_smallest_record": 2603,
  "disable_auto_hide_backend_context_joypad_icon": 2604,
  "disable_clear_skill_id_delay_in_avatar_useskill_mixin": 2605,
  "enable_getentitybyruntimeid": 2606,
  "enable_invalid_modifier_postrecoverfromserver": 2610,
  "enable_dungeon_cutscene_gc_collect": 2611,
  "disable_attach_modifier_remove_reason_sync_fix": 2612,
  "disable_dynamicadd_component": 2613,
  "disable_remove_collider_on_normal_pickable_destroy": 2614,
  "enable_ability_check_parent_hash": 2615,
  "enable_ability_check_parent_hash_log": 2616,
  "disable_ability_check_child_hash": 2617,
  "disable_eyectrl_tick_lod": 2618,
  "disable_packet_loss_warning": 2619,
  "disable_new_reuse_entity": 2620,
  "disable_onentityreuseready_set_visible_early": 2621,
  "disable_homeworld_wait_for_finish_rsp": 2622,
  "disable_ios_force_upgrade_video_frame_rate": 2623,
  "disable_set_local_avatar_pos_in_entity_manager": 2624,
  "enable_new_language": 2625,
  "disable_clear_level_cinestate": 2626,
  "enable_scene_point_local_gadget_authority_use_host": 2627,
  "disable_keyboard_in_ios": 2628,
  "disable_keyboard_in_android": 2629,
  "disable_keyboard_in_ps4": 2630,
  "disable_new_bundle_lru_method": 2631,
  "disable_hash_list_global_value": 2632,
  "enable_dynamic_share_slice_frmae_game_system_time": 2633,
  "disable_packet_slice_guarantee": 2634,
  "disable_ready_slice_guarantee": 2634,
  "disable_camera_slope_bugfix": 2635,
  "disable_adjust_remote_sync_for_air_move": 2636,
  "disable_flush_remove_local_gadget": 2637,
  "disable_attachmodifier_check": 2638,
  "disable_challenge_add_sub_refresh": 2639,
  "disable_clear_cur_sceneid": 2640,
  "disable_ability_attachmodifier_lazy_sync": 2641,
  "disable_sectr_collider_layer": 2642,
  "disable_sectr_volume_layer_ahead": 2643,
  "disable_tlentity_dispose_material_group": 2644,
  "disable_mixin_reinit_value_step_on_post_recover": 2645,
  "enable_sectr_enterscene_fastreset": 2646,
  "disable_new_vcfaceanimation": 2647,
  "disable_use_new_url": 2648,
  "disable_entity_appear_ready_time_log": 2649,
  "disable_one_stack_element_reaction": 2650,
  "disable_asyncload_buff_avatar": 2651,
  "disable_ui_effect_order": 2652,
  "disable_monster_blink_check": 2653,
  "disable_collider_layer_adpative_close": 2654,
  "disable_clear_monster_remote_motion": 2655,
  "disable_sdk_download_live_notification": 2656,
  "enable_hlod_model_layer_show_lod": 2657,
  "disable_clear_residual_tint_when_level_destroy": 2658,
  "disable_clear_residual_tint_when_reload_res": 2659,
  "disable_global_perf_graphic_ios": 2681,
  "disable_global_perf_graphic_android": 2682,
  "disable_global_perf_graphic_pc": 2683,
  "disable_global_perf_graphic_ps4": 2684,
  "disable_global_perf_graphic_ps5": 2685,
  "disable_reset_surface_type_monster": 2686,
  "disable_listenevent_valid": 2687,
  "disable_use_push_collider_for_occluder": 2688,
  "disable_texture_streaming_budget_by_low_mem_region": 2689,
  "disable_stop_pickable_on_fall": 2690,
  "disable_talk_force_sync_stand_by": 2691,
  "disable_ability_reconnect_sync_to_server_fix": 2692,
  "enable_sdk_google_promotion": 2693,
  "disable_volume_portal_filter_ignore_terrain": 2694,
  "disable_volume_portal_filter_ignore_persist": 2695,
  "disable_main_page_countdown_check": 2696,
  "disable_global_light_glimmer": 2697,
  "disable_camera_boat_state_get_water_height_from_vehicle": 2698,
  "disable_skiff_remote_close_to_water": 2699,
  "disable_bullet_hit_sync_field": 26100,
  "enable_field_hitsync_configid": 26101,
  "disable_enter_irodori_dungeon_sfx": 26102,
  "disable_fly_on_black_mud_fix": 26103,
  "disable_foundation_notify_register_packet_queue": 26104,
  "disable_character_air_dist_check": 26105,
  "disable_loading_unload_used_bank": 26106,
  "enable_loading_page_unload_used_bank": 26107,
  "disable_audio_wait_full_resourec_mode": 26108,
  "disable_collider_layer_load_bound_rand": 26109,
  "disable_clear_npc_first_meet_flag": 26110,
  "disable_interaction_change_shadow_cache": 26111,
  "disable_get_target_score_new": 26112,
  "disable_bag_page_exp_stone_bottom": 26113,
  "disable_sectr_city_object_offset": 2701,
  "disable_ai_threat_use_bullet_origin_owner": 2702,
  "disable_onentityready_set_visible_early": 2703,
  "disable_dungeon_render_root_offset": 2704,
  "disable_crowd_cone_view_optimization": 2705,
  "disable_vcavatarcombat_latetick_fix": 2706,
  "disable_new_gadget_page": 2707,
  "disable_massive_clean_frozen_on_melt": 2708,
  "disable_massive_ability_check_before_destroy": 2709,
  "disable_new_entity_queue": 2710,
  "disable_static_loader_cell_index": 2711,
  "disable_use_new_avatar_select_list_dialog": 2712,
  "disable_rewired_keyboard": 2713,
  "disable_avatar_aim_moving_sync": 2714,
  "disable_avatar_air_compensation": 2715,
  "enable_load_all_npc_cs_dialog": 2716,
  "disable_unload_bundle_fix": 2717,
  "disable_non_base_layer_sync": 2718,
  "use_multiplayer_element_shield_plugin": 2719,
  "disable_backstage_avatar_reaction": 2720,
  "disable_joypad_webview_count": 2721,
  "disable_auto_ban_npc": 2722,
  "enable_audio_ios_suspend_delay": 2723,
  "disable_crowd_visible_mask": 2724,
  "disable_map_size_scale_cache_mini_map": 2725,
  "enable_delete_android_redundancy_files": 2726,
  "disable_packet_deserialize_warning": 2727,
  "disable_camera_look_set_target_trans_pos": 2728,
  "disable_remove_companion_mark_on_disconnect": 2729,
  "disable_refresh_item_count_on_enable": 2730,
  "disable_multi_section_txt": 2732,
  "disable_new_sector_volume": 2733,
  "disable_shenhe_dungeon_slip": 2734,
  "disable_force_is_peer_id_from_player_for_life_by_owner_v2": 2735,
  "disable_life_by_owner_v2_like_kill_self": 2736,
  "disable_remote_monster_process_force_in_air": 2737,
  "disable_follow_move_self_destroy_skip": 2738,
  "disable_material_group_leak_fix": 2739,
  "disable_invalid_surface_type_for_movestate": 2740,
  "disable_blackmud_rendererinfo": 2741,
  "disable_volume_portal_when_loading": 2742,
  "disable_memory_block": 2743,
  "disable_npc_head_protect_angle": 2744,
  "disable_additional_sectr_flush": 2745,
  "disable_force_refersh_climete_on_ui_close": 2746,
  "disable_peer_id_owner_null_fix": 2747,
  "disable_remove_all_pickup_button_new_logic": 2748,
  "disable_black_screen_res_async_load_switch": 2749,
  "disable_owner_die_check_for_all_gadget": 2750,
  "disable_owner_die_check_for_all_monster": 2751,
  "disable_avatar_drop_maxspeed_record": 2752,
  "enable_yelam_crash": 2753,
  "disable_hit_air_flush": 2754
}

def main(args):
  custom_config = {
    "codeSwitch": []
  }

  # sdk
  custom_config["sdkenv"] = args.sdk_env
  # checkdevice
  custom_config["checkdevice"] = args.check_device
  # loadPatch
  custom_config["loadPatch"] = args.load_patch
  # showexception
  custom_config["showexception"] = args.show_exception
  # regionConfig
  if args.region_conf:
    custom_config["regionConfig"] = args.region_conf
  # downloadMode
  if hasattr(args, 'download_mode'):
    custom_config["downloadMode"] = args.download_mode
  # code
  for switch in args.code_switches or []:
    custom_config["codeSwitch"].append(CODE_SWITCH_DATA[switch[0]])
  # razor chroma
  if args.disable_razor_chroma:
    custom_config["disableRazorChromaInit"] = True
  # cah
  if args.no_check_ability_hash:
    custom_config["cah"] = False

  print(json.dumps(custom_config, separators=(',', ':')))

if __name__ == "__main__":
  parser = ArgumentParser(description="Generates global client custom config")
  parser.add_argument("--sdk-env", type=int, help="SDK envirionment", required=True)
  parser.add_argument("--code", "-c", dest='code_switches', type=str, action="append", help="Toggle specific code feature", choices=CODE_SWITCH_DATA.keys(), nargs='*')
  parser.add_argument("--check-device", action='store_true', help="???")
  parser.add_argument("--load-patch", action='store_true', help="???")
  parser.add_argument("--show-exception", action='store_true', help="???")
  parser.add_argument("--download-mode", type=int, help="???")
  parser.add_argument("--region-conf", type=str, help="???")
  parser.add_argument("--disable-razor-chroma", action='store_true', help="Disables Razor Chroma integration")
  parser.add_argument("--no-check-ability-hash", action='store_true', help="???")

  sys.exit(main(parser.parse_args()))
